(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-344accb9"],{"0fea":function(e,t,a){e.exports=a("723a")},"16b0":function(e,t,a){"use strict";var r=a("cdda"),o=a.n(r);o.a},"39d8":function(e,t,a){},4443:function(e,t,a){"use strict";var r=a("39d8"),o=a.n(r);o.a},"723a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"lk-toolbar"},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加分组")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,"element-loading-text":"拼命加载中",height:"100%",border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"roleName","min-width":"100",label:"分组名称"}}),a("el-table-column",{attrs:{prop:"remark","min-width":"150",label:"备注信息"}}),a("el-table-column",{attrs:{"min-width":"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.setRoleOperator(t.row)}}},[e._v("配置用户")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.setRoleMenu(t.row)}}},[e._v("配置权限")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.editRole(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.deleteRole(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryParams.currentPage,"page-size":20,total:e.total,layout:"->, total, prev, pager, next, jumper"},on:{"current-change":e.queryList,"update:currentPage":function(t){e.$set(e.queryParams,"currentPage",t)}}}),a("add-dialog",{model:{value:e.addDialogVisible,callback:function(t){e.addDialogVisible=t},expression:"addDialogVisible"}}),a("edit-dialog",{attrs:{dialogData:e.rowData},model:{value:e.editDialogVisible,callback:function(t){e.editDialogVisible=t},expression:"editDialogVisible"}}),a("operator-dialog",{attrs:{dialogData:e.rowData},model:{value:e.operatorDialogVisible,callback:function(t){e.operatorDialogVisible=t},expression:"operatorDialogVisible"}}),a("menu-dialog",{attrs:{dialogData:e.rowData},model:{value:e.menuDialogVisible,callback:function(t){e.menuDialogVisible=t},expression:"menuDialogVisible"}})],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加分组",visible:e.addDialogVisible,center:"",width:"35%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{staticClass:"lk-form",attrs:{"label-position":"right","label-width":"100px"}},[a("el-form-item",{class:[e.errors.has("roleName")?"is-error":"","is-required"],attrs:{label:"分组名称"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"roleName","data-vv-as":"分组名称"},model:{value:e.formData.roleName,callback:function(t){e.$set(e.formData,"roleName",t)},expression:"formData.roleName"}}),e.errors.has("roleName")?a("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.errors.first("roleName")))]):e._e()],1),a("el-form-item",{attrs:{label:"备注信息"}},[a("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 认")]),a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")])],1)],1)},l=[],n={props:{value:{type:Boolean,default:!1}},data:function(){return{formData:{},addDialogVisible:!1}},watch:{value:function(e){this.addDialogVisible=e,this.errors.clear(),this.formData={}},addDialogVisible:function(e){this.$emit("input",e)}},methods:{submit:function(){var e=this;this.$validator.validateAll().then(function(t){if(t){var a={};a.remark=e.formData.remark,a.roleName=e.formData.roleName,e.$apis.addOrUpdateRole(a).then(function(t){"2000"===t.code?(e.$message.success("添加成功"),e.addDialogVisible=!1,e.$parent.queryList()):e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})}})}}},s=n,u=a("2877"),c=Object(u["a"])(s,i,l,!1,null,null,null);c.options.__file="addDialog.vue";var d=c.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"修改分组",visible:e.editDialogVisible,center:"",width:"35%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{staticClass:"lk-form",attrs:{"label-position":"right","label-width":"100px"}},[a("el-form-item",{class:[e.errors.has("roleName")?"is-error":"","is-required"],attrs:{label:"分组名称"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"roleName","data-vv-as":"分组名称"},model:{value:e.formData.roleName,callback:function(t){e.$set(e.formData,"roleName",t)},expression:"formData.roleName"}}),e.errors.has("roleName")?a("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.errors.first("roleName")))]):e._e()],1),a("el-form-item",{attrs:{label:"备注信息"}},[a("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 认")])],1)],1)},b=[],g=a("be94"),f={props:{value:{type:Boolean,default:!1},dialogData:{}},data:function(){return{formData:{},editDialogVisible:!1}},watch:{value:function(e){this.editDialogVisible=e,this.errors.clear(),this.formData=Object(g["a"])({},this.dialogData)},editDialogVisible:function(e){this.$emit("input",e)}},methods:{submit:function(){var e=this;this.$validator.validateAll().then(function(t){if(t){var a={};a.roleId=e.formData.roleId,a.remark=e.formData.remark,a.roleName=e.formData.roleName,e.$apis.addOrUpdateRole(a).then(function(t){"2000"===t.code?(e.$message.success("修改成功"),e.editDialogVisible=!1,e.$parent.queryList()):e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})}})}}},p=f,h=Object(u["a"])(p,m,b,!1,null,null,null);h.options.__file="editDialog.vue";var v=h.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"配置用户--"+e.roleName,visible:e.operatorDialogVisible,center:"",width:"60%"},on:{"update:visible":function(t){e.operatorDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:9}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.outTableLoading,expression:"outTableLoading"}],attrs:{data:e.outTableData,"element-loading-text":"拼命加载中","max-height":"450",size:"small",border:""},on:{"selection-change":e.outTableSelChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"operatorName",label:"未分配用户"}})],1),a("el-pagination",{attrs:{"current-page":e.queryOutParams.currentPage,"page-size":20,total:e.outTableTotal,layout:"->, total, prev, pager, next"},on:{"current-change":e.queryOutTable,"update:currentPage":function(t){e.$set(e.queryOutParams,"currentPage",t)}}})],1),a("el-col",{staticClass:"centerBtns",attrs:{span:6}},[a("div",[a("el-button",{attrs:{type:"success",disabled:e.addBtnDisabled},on:{click:e.addRoleOperator}},[e._v(" 添 加 > > ")])],1),a("div",[a("el-button",{attrs:{type:"danger",disabled:e.removeBtnDisabled},on:{click:e.removeRoleOperator}},[e._v(" < < 移 除 ")])],1)]),a("el-col",{attrs:{span:9}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.inTableLoading,expression:"inTableLoading"}],attrs:{data:e.inTableData,"element-loading-text":"拼命加载中","max-height":"450",size:"small",border:""},on:{"selection-change":e.inTableSelChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"operatorName",label:"已分配用户"}})],1),a("el-pagination",{attrs:{"current-page":e.queryInParams.currentPage,"page-size":20,total:e.inTableTotal,layout:"->, total, prev, pager, next"},on:{"current-change":e.queryInTable,"update:currentPage":function(t){e.$set(e.queryInParams,"currentPage",t)}}})],1)],1)],1)},y=[],$={props:{value:{type:Boolean,default:!1},dialogData:{}},data:function(){return{operatorDialogVisible:!1,outTableData:null,outTableLoading:!1,outTableTotal:null,queryOutParams:{currentPage:1,status:0},inTableData:null,inTableLoading:!1,inTableTotal:null,queryInParams:{currentPage:1,status:1},addBtnDisabled:!0,removeBtnDisabled:!0,addArray:[],removeArray:[],roleName:""}},watch:{value:function(e){this.operatorDialogVisible=e,e&&(this.roleName=this.dialogData.roleName,this.queryOutParams.roleId=this.dialogData.roleId,this.queryInParams.roleId=this.dialogData.roleId,this.queryOutTable(),this.queryInTable())},operatorDialogVisible:function(e){this.$emit("input",e)}},methods:{queryOutTable:function(){var e=this;this.outTableLoading=!0,this.$apis.queryRoleOperator(this.queryOutParams).then(function(t){e.outTableLoading=!1,"2000"===t.code?(e.outTableData=t.data.sysOperatorDtos,e.outTableTotal=t.data.total):e.$message.error(t.message)}).catch(function(t){e.outTableLoading=!1,e.$message.error(t)})},queryInTable:function(){var e=this;this.inTableLoading=!0,this.$apis.queryRoleOperator(this.queryInParams).then(function(t){e.inTableLoading=!1,"2000"===t.code?(e.inTableData=t.data.sysOperatorDtos,e.inTableTotal=t.data.total):e.$message.error(t.message)}).catch(function(t){e.inTableLoading=!1,e.$message.error(t)})},outTableSelChange:function(e){e.length>0?this.addBtnDisabled=!1:this.addBtnDisabled=!0,this.addArray=e},inTableSelChange:function(e){e.length>0?this.removeBtnDisabled=!1:this.removeBtnDisabled=!0,this.removeArray=e},addRoleOperator:function(){var e=this,t={};t.roleId=this.dialogData.roleId,t.operatorId=this.addArray.map(function(e){return e.operatorId}),this.$apis.addRoleOperator(t).then(function(t){"2000"===t.code?(e.queryOutTable(),e.queryInTable(),e.$parent.queryList()):e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})},removeRoleOperator:function(){var e=this,t={};t.roleId=this.dialogData.roleId,t.operatorId=this.removeArray.map(function(e){return e.operatorId}),this.$apis.removeRoleOperator(t).then(function(t){"2000"===t.code?(e.queryOutTable(),e.queryInTable(),e.$parent.queryList()):e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})}}},k=$,T=(a("16b0"),Object(u["a"])(k,D,y,!1,null,"f1526a08",null));T.options.__file="operatorDialog.vue";var w=T.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"配置权限--"+e.roleName,visible:e.menuDialogVisible,center:"",width:"35%"},on:{"update:visible":function(t){e.menuDialogVisible=t}}},[a("el-tree",{ref:"menuTree",staticClass:"menuTree",attrs:{data:e.treeData,props:e.treeProps,"default-checked-keys":e.treeCheckedKeys,"node-key":"menuId","show-checkbox":"","default-expand-all":""}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.menuDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 认")])],1)],1)},q=[];function _(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function O(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function x(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function N(e){return _(e)||O(e)||x()}var I={props:{value:{type:Boolean,default:!1},dialogData:{}},data:function(){return{menuDialogVisible:!1,roleName:"",treeProps:{children:"children",label:"menuName"},treeCheckedKeys:[],treeData:[]}},watch:{value:function(e){this.menuDialogVisible=e,e&&(this.roleName=this.dialogData.roleName,this.queryRoleMenu())},menuDialogVisible:function(e){this.$emit("input",e)}},methods:{queryRoleMenu:function(){var e=this;this.$apis.queryRoleMenu({roleId:this.dialogData.roleId}).then(function(t){"2000"===t.code?(e.treeCheckedKeys=t.data.checkedMenuIds,e.treeData=t.data.menuList):e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})},submit:function(){var e=this,t={};t.roleId=this.dialogData.roleId,t.menuIds=N(this.$refs.menuTree.getCheckedKeys()),this.$apis.updateRoleMenu(t).then(function(t){"2000"===t.code?(e.$message.success("配置成功"),e.menuDialogVisible=!1):e.$message.error(t.message)}).catch(function(t){e.$message.error(t)})}}},P=I,L=(a("4443"),Object(u["a"])(P,V,q,!1,null,"3e031cc3",null));L.options.__file="menuDialog.vue";var R=L.exports,j={data:function(){return{tableData:null,tableLoading:!1,queryParams:{currentPage:1},total:null,addDialogVisible:!1,editDialogVisible:!1,operatorDialogVisible:!1,menuDialogVisible:!1,rowData:null}},components:{addDialog:d,editDialog:v,operatorDialog:w,menuDialog:R},created:function(){this.queryList()},methods:{queryList:function(){var e=this;this.tableLoading=!0,this.$apis.queryAllRole(this.queryParams).then(function(t){e.tableLoading=!1,"2000"===t.code?(e.tableData=t.data.roleDtos,e.total=t.data.total):e.$message.error(t.message)}).catch(function(t){e.tableLoading=!1,e.$message.error(t)})},setRoleOperator:function(e){this.operatorDialogVisible=!0,this.rowData=e},editRole:function(e){this.rowData=e,this.editDialogVisible=!0},deleteRole:function(e){var t=this;this.$confirm("确认删除".concat(e.roleName,"?")).then(function(a){t.$apis.deleteRole({roleId:e.roleId}).then(function(e){"2000"===e.code?(t.$message.success("删除成功"),t.queryList()):t.$message.error(e.message)}).catch(function(e){t.$message.error(e)})}).catch(function(e){})},setRoleMenu:function(e){this.rowData=e,this.menuDialogVisible=!0}}},C=j,A=Object(u["a"])(C,r,o,!1,null,null,null);A.options.__file="roleManage.vue";t["default"]=A.exports},be94:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},o=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),o.forEach(function(t){r(e,t,a[t])})}return e}a.d(t,"a",function(){return o})},cdda:function(e,t,a){}}]);
//# sourceMappingURL=chunk-344accb9.1dbf2b5d.js.map